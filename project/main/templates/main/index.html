{% extends 'main/base.html' %}
{% load static %}

{% block title %}ParkSafe | Location de places de parking entre particuliers{% endblock %}

{% block extra_head %}
<style>
    #hero {
        background-image: url("{% static 'images/home/hero-2.jpg' %}");
        position: relative;
    }
</style>
<link rel="stylesheet" href="{% static 'css/main/home-styles.css' %}">
<link rel="stylesheet" href="{% static 'faq/faq_styles.css' %}">
<link rel='stylesheet' href="{% static 'avis_styles.css' %}">
{% endblock %}

{% block content %}
    <!-- HERO SECTION -->
    <section id="hero" class="min-h-[75vh] relative bg-center bg-no-repeat bg-cover flex z-0 shadow-xl">
        <div class="w-full h-full bg-black/50 absolute top-0 left-0 z-0"></div> <!-- Overlay sombre pour meilleure lisibilité -->
    
        <div class="mx-auto my-auto w-full max-w-[1280px] relative z-10 flex flex-col items-center text-center">
            <h1 class="text-8xl sm:text-[120px] md:text-[175px] jomhuria primary drop-shadow-[0_1.2px_1.2px_rgba(0,0,0,0.8)]">
                <span>Park</span><span class="text-white">Safe</span>
            </h1>
            <h2 class="text-2xl lg:text-5xl drop-shadow-[0_1.2px_1.2px_rgba(0,0,0,0.8)] poppins text-white uppercase font-semibold">
                Parking de particulier à particulier
            </h2>
            <p class="text-lg lg:text-3xl my-6 lg:my-8 text-white transition-colors duration-300 opensans drop-shadow-[0_1.2px_1.2px_rgba(0,0,0,0.8)]">
                Économisez du temps et de l'argent<br>
                en réservant une place de parking chez nos hôtes locaux
            </p>
    
            <div class="flex flex-wrap justify-center gap-5 lg:gap-10 my-8 lg:my-10">
                <a href="#trouver-place">
                    <button class="text-base lg:text-2xl py-3 px-6 text-white border-2 border-white flex items-center rounded-xl  
                                  hover:text-blue-400 hover:border-blue-400 transition-all duration-200 ease-in-out hover:-translate-y-1">
                        Trouver une place    
                    </button>
                </a>
                <a href="#louer-place">
                    <button class="text-base lg:text-2xl py-3 px-6 text-white bg-blue-500 border-2 border-blue-500 flex items-center rounded-xl  
                                 hover:bg-blue-400 hover:border-blue-400 transition-all duration-200 ease-in-out hover:-translate-y-1">
                        Louer ma place    
                    </button>
                </a>
            </div>
        </div>
    </section>
    

 <!-- POURQUOI PARKSAFE -->
<!-- POURQUOI PARKSAFE -->
<section class="pt-10 pb-20 bg-slate-100 shadow-xl">
    <h1 class="poppins text-4xl md:text-5xl lg:text-6xl font-bold text-center primary">
        Pourquoi <span class="secondary">Park</span><span class="secondary">Safe</span> ?
    </h1>
    <div class="flex flex-wrap justify-center gap-6 w-full max-w-[1500px] mx-auto text-center my-12 px-4">
        <!-- Parking Economique -->
        <div class="bg-white shadow-md py-10 px-6 md:py-12 md:px-10 rounded-lg flex-1 basis-[300px] max-w-[400px]">
            <h3 class="my-6 poppins text-2xl md:text-3xl font-bold secondary">
                Parking Économique
            </h3>
            <p class="text-lg md:text-xl poppins">
                Ne payez plus le prix fort pour stationner près de l'aéroport.
                <br><br>
                Trouvez des places de parking proposées par des hôtes locaux, à des tarifs bien plus abordables que ceux des parkings traditionnels.
            </p>
        </div>
        <!-- Annulation gratuite -->
        <div class="bg-white shadow-md py-10 px-6 md:py-12 md:px-10 rounded-lg flex-1 basis-[300px] max-w-[400px]">
            <h3 class="my-6 poppins text-2xl md:text-3xl font-bold secondary">
                Annulation gratuite
            </h3>
            <p class="text-lg md:text-xl poppins">
                Réservez en toute sérénité ! Grâce à notre politique d'annulation gratuite, vous pouvez modifier ou annuler votre réservation sans frais, jusqu'à 24 heures avant l'heure prévue.
                <br><br>
                Profitez de la flexibilité dont vous avez besoin pour voyager l'esprit tranquille.
            </p>
        </div>
        <!-- Sécurité et tranquillité -->
        <div class="bg-white shadow-md py-10 px-6 md:py-12 md:px-10 rounded-lg flex-1 basis-[300px] max-w-[400px]">
            <h3 class="my-6 poppins text-2xl md:text-3xl font-bold secondary">
                Sécurité et tranquillité
            </h3>
            <p class="text-lg md:text-xl poppins">
                Nos hôtes sont vérifiés pour vous garantir une expérience de stationnement sûre et fiable.
                <br><br>
                Garez-vous en toute confiance dans des lieux sécurisés et surveillés, directement chez des résidents.
            </p>
        </div>
    </div>
</section>


    <!-- COMMENT CA MARCHE ? -->
    {% include 'main/sections/comment_ca_marche_section.html' %}
    

    <!-- AVIS -->
<section class="bg-white pt-16 flex flex-col poppins" id="avis">
    <!-- TITLE -->
    <div class="w-full mx-auto max-w-[1080px] px-5">
        <h3 class="secondary text-2xl md:text-3xl font-medium">Avis clients</h3>
        <p class="text-lg md:text-xl font-light text-slate-600 mb-8 relative">
            Consultez ci-dessous les retours sur ce loueur, et laissez le vôtre
            <span class="absolute w-16 md:w-24 h-[1px] bg-slate-600 bottom-0 left-0 translate-y-2"></span>
        </p>
    </div>

    <!-- AVIS -->
    <div class="w-full flex justify-center my-6 relative">
        <!-- Bandeau bleu -->
        <div class="absolute w-full h-16 bg-primary left-0 top-14 z-10"></div>
        <!-- Container principal avec taille max -->
        <div class="w-full max-w-[1400px] relative">
            <!-- Container des avis avec overflow hidden -->
            <div class="relative z-20 px-4">
                {% if not avis_recus.exists %}
                    <!-- AUCUN AVIS -->
                    <div class="mx-auto w-[90%] xl:w-[450px] bg-white min-h-[350px] xl:h-[450px] shadow-lg rounded-3xl 
                                flex flex-col px-5 xl:px-10 text-center items-center justify-center">
                        <h3 class="secondary text-xl xl:text-2xl font-medium">
                            Aucun avis pour le moment
                        </h3>
                        <p class="text-lg xl:text-xl font-light text-slate-600 my-5">
                            {% if place.user == request.user %}
                                Vous n'avez pas encore reçu d'avis
                            {% else %}
                                Soyez le premier à laisser votre avis sur ce loueur
                            {% endif %}
                        </p>
                    </div>
                {% else %}
                    <!-- Boutons de navigation -->
                    {% if avis_recus.count > 1 %}
                        <button id="prevBtn" class="absolute left-2 xl:left-0 top-1/2 z-30 bg-white rounded-full p-2 xl:p-3 shadow-lg hover:bg-gray-100 -translate-y-1/2 disabled:opacity-50 disabled:cursor-not-allowed">
                            <span class="text-xl xl:text-3xl">←</span>
                        </button>
                        <button id="nextBtn" class="absolute right-2 xl:right-0 top-1/2 z-30 bg-white rounded-full p-2 xl:p-3 shadow-lg hover:bg-gray-100 -translate-y-1/2 disabled:opacity-50 disabled:cursor-not-allowed">
                            <span class="text-xl xl:text-3xl">→</span>
                        </button>
                    {% endif %}

                    <!-- Container avec effet de slide -->
                    <div class="overflow-hidden">
                        <div id="avisContainer" class="flex gap-5 transition-transform duration-300">
                            {% for avis in avis_recus %}
                                <div class="avis-card flex-shrink-0 w-[90vw] xl:w-[450px] bg-white min-h-[350px] xl:h-[450px] shadow-lg rounded-3xl 
                                        flex flex-col px-5 xl:px-10 text-center items-center justify-center">
                                    <!-- CLIENT -->
                                    <div class="flex gap-3 xl:gap-5 items-center">
                                        <div class="h-12 w-12 xl:h-16 xl:w-16 rounded-full overflow-hidden">
                                            <img src="{{avis.client.profil_pic.url}}" alt="Photo de profil" class="object-cover w-full h-full">
                                        </div>
                                        <h3 class="secondary text-2xl xl:text-3xl font-semibold">
                                            {{avis.client.first_name}} {{avis.client.last_name|slice:"1"}}.
                                        </h3>
                                    </div>
                                    <p class="text-base xl:text-lg text-slate-500">
                                        Avis reçu le : {{avis.created_on}}
                                    </p>
                                    <div class="flex gap-1 xl:gap-2 my-4 xl:my-5">
                                        {% for i in '12345'|make_list %}
                                            <span class="text-2xl xl:text-4xl {% if avis.stars >= i|add:'0' %}text-amber-400{% else %}text-gray-200{% endif %}">★</span>
                                        {% endfor %}
                                    </div>
                                    <p class="text-lg xl:text-xl font-light text-slate-600 my-4 xl:my-5">
                                        {{avis.avis}}
                                    </p>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

    

    <!-- FAQ -->
    {% include 'main/sections/faq_section.html' %}
{% endblock %}

{% block extra_script %}
<script src="{% static 'faq/faq_script.js' %}"></script>
<script src="{% static 'avis_script.js' %}"></script>
{% endblock %}
